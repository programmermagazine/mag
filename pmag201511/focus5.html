<html><head><meta charset="utf-8"><link href="../static.css" rel="stylesheet"><title>程式人雜誌/2015年7月號/koa--建構web網站的核心框架</title></head><body><header><p><a href="../main/home.html">首頁</a> /  <a href="../pmag/home.html">程式人雜誌</a>  / <a href="../pmag201507/home.html">2015年7月號</a> </p></header><main><article><h2 id="koaweb">koa -- 建構 web 網站的核心框架</h2>

<h3 id="">簡介</h3>

<ul>
<li><p>說明：  express 原班人馬創造支援 ES6 新語法 yield 的套件</p></li>
<li><p>官網專案： <a href="https://github.com/koajs/koa">https://github.com/koajs/koa</a></p></li>
<li><p>推薦文章：<a href="http://weblogs.asp.net/shijuvarghese/a-simple-crud-demo-with-koa-js?hc_location=ufi">A Simple CRUD Demo with Koa.js
Sunday, January 12, 2014</a></p></li>
<li><p>推薦影片： James Moore (共十集） -- <a href="http://knowthen.com/category/node-js/">http://knowthen.com/category/node-js/</a></p></li>
<li><p>官方範例： <a href="https://github.com/koajs/examples">https://github.com/koajs/examples</a></p></li>
<li><p>single page app : <a href="https://medium.com/@adam_bickford/creating-a-basic-site-with-koa-pt-1-f3e1711f7a9">https://medium.com/@adam_bickford/creating-a-basic-site-with-koa-pt-1-f3e1711f7a9</a></p></li>
</ul>

<h3 id="koaexpress">Koa 與 Express 相關套件的對應表</h3>

<table>
<thead>
<tr>
<th id="\" style="text-align:left;"> \ </th>
<th id="koa_相關套件" style="text-align:left;"> Koa 相關套件 </th>
<th id="express_相關套件" style="text-align:left;"> Express 相關套件 </th>
</tr>
</thead>

<tbody>
<tr>
<td style="text-align:left;"><p>中間件 </p></td>
<td style="text-align:left;"><p>koa </p></td>
<td style="text-align:left;"><p>connect </p></td>
</tr>

<tr>
<td style="text-align:left;"><p>路徑比對 </p></td>
<td style="text-align:left;"><p>koa-router </p></td>
<td style="text-align:left;"><p>express </p></td>
</tr>

<tr>
<td style="text-align:left;"><p>檔案靜態化 </p></td>
<td style="text-align:left;"><p>koa-static, koa-static-folder </p></td>
<td style="text-align:left;"><p>express.static </p></td>
</tr>

<tr>
<td style="text-align:left;"><p>資料夾索引 </p></td>
<td style="text-align:left;"><p>koa-serve-index </p></td>
<td style="text-align:left;"><p>serve-index </p></td>
</tr>

<tr>
<td style="text-align:left;"><p>檔案輸出入 </p></td>
<td style="text-align:left;"><p>co-fs, mz/fs, save-to </p></td>
<td style="text-align:left;"><p>fs </p></td>
</tr>

<tr>
<td style="text-align:left;"><p>post body 處理 </p></td>
<td style="text-align:left;"><p>koa-bodyparser, co-busboy </p></td>
<td style="text-align:left;"><p>body-parser </p></td>
</tr>

<tr>
<td style="text-align:left;"><p>session 管理 </p></td>
<td style="text-align:left;"><p>koa-session </p></td>
<td style="text-align:left;"><p>express-session </p></td>
</tr>

</tbody>
</table>

<h3 id="">官方範例</h3>

<p>請先安裝 git, io.js 並用下列指令下載 koa.js 官方範例後，再開始執行後面給的例子。</p>

<pre><code>$ git clone https://github.com/koajs/examples.git
$ cd examples
$ ren examples koa-ex
$ npm install
$ npm install swig
</code></pre>

<h3 id="helloworld">範例: Hello World</h3>

<ul>
<li>原始碼： <a href="https://github.com/koajs/examples/tree/master/hello-world">https://github.com/koajs/examples/tree/master/hello-world</a></li>
<li>使用方法：執行 iojs app 之後看 http://localhost:3000/</li>
</ul>

<h3 id="">範例:</h3>

<ul>
<li>原始碼： <a href="https://github.com/koajs/examples/tree/master/stream-file">https://github.com/koajs/examples/tree/master/stream-file</a></li>
<li>使用方法：執行 iojs app 之後看 http://localhost:3000/README.md</li>
</ul>

<h2 id="templates">範例: templates</h2>

<ul>
<li>原始碼： <a href="https://github.com/koajs/examples/tree/master/templates">https://github.com/koajs/examples/tree/master/templates</a></li>
<li>使用方法： 執行 iojs index 之後看 http://localhost:4000/</li>
</ul>

<h3 id="">範例: 網誌</h3>

<ul>
<li>原始碼： <a href="https://github.com/koajs/examples/tree/master/blog">https://github.com/koajs/examples/tree/master/blog</a></li>
</ul>

<pre><code>D:\git\koa-ex&gt;npm install swig
swig@1.4.2 node_modules\swig
├── optimist@0.6.1 (wordwrap@0.0.2, minimist@0.0.10)
└── uglify-js@2.4.19 (uglify-to-browserify@1.0.2, async@0.2.10, yargs@3.5.4,
source-map@0.1.34)

D:\git\koa-ex&gt;cd blog

D:\git\koa-ex\blog&gt;iojs index
listening on port 3000
  &lt;-- GET /post
  --&gt; GET /post 404 23ms -
  &lt;-- GET /
  --&gt; GET / 200 116ms -
  &lt;-- GET /post/new
  --&gt; GET /post/new 200 18ms -
  &lt;-- POST /post
  --&gt; POST /post 302 47ms -
  &lt;-- GET /
  --&gt; GET / 200 10ms -
  &lt;-- GET /post/new
  --&gt; GET /post/new 200 40ms -
  &lt;-- POST /post
  --&gt; POST /post 302 32ms -
  &lt;-- GET /
  --&gt; GET / 200 25ms -
  &lt;-- GET /post/0
  --&gt; GET /post/0 200 8ms -
  &lt;-- GET /post/1
  --&gt; GET /post/1 200 7ms -
  &lt;-- GET /post/new
  --&gt; GET /post/new 200 5ms -
</code></pre>

<p>執行結果</p>

<div class="figure"><img src="koa_blog.jpg"/><p class="caption"></p></div>

<hr />

<p><center style="font-size:small;color:#888888">本文部份內容與大部份圖片修改自 <a href="http://zh.wikipedia.org/">維基百科</a> ， 使用時請遵守 <a href="http://creativecommons.org/licenses/by-sa/3.0/tw/">姓名標示、相同方式分享</a> 授權。<br/> 編輯：  <a href="#ccc:home">陳鍾誠</a>  email: <a href="&#109;&#97;i&#108;&#116;&#x6f;:&#x63;&#x63;&#x63;k&#x6d;&#105;&#x74;&#64;g&#109;&#x61;il&#46;&#x63;&#111;&#x6d;">&#x63;&#x63;&#x63;k&#x6d;&#105;&#x74;&#64;g&#109;&#x61;il&#46;&#x63;&#111;&#x6d;</a></center></p></article></main></body></html>